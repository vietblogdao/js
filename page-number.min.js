// Name: Blogger Pagination Plugin
// Author: Viá»‡t Designer
// Website: www.thietkeblogspot.com
var noPage,currentPage,currentPageNo,postLabel,postResults=pageConf.numposts,numOfPages=2,nextPage='<i class="icon-angle-right"></i>',prevPage='<i class="icon-angle-left"></i>',pageDots="...",locationUrl=location.href;function startPagination(e){var a="";pageNumber=parseInt(numOfPages/2),pageNumber==numOfPages-pageNumber&&(numOfPages=2*pageNumber+1),pageStart=currentPageNo-pageNumber,pageStart<1&&(pageStart=1),lastPageNo=parseInt(e/postResults)+1,lastPageNo-1==e/postResults&&(lastPageNo-=1),pageEnd=pageStart+numOfPages-1,pageEnd>lastPageNo&&(pageEnd=lastPageNo);var t=parseInt(currentPageNo)-1;currentPageNo>1&&(a+=2==currentPageNo?"page"==currentPage?'<a class="page-number prev" href='+home_page+' title="Previous page">'+prevPage+"</a>":'<a class="page-number prev" href="/search/label/'+postLabel+"?max-results="+postResults+'" title="Previous page">'+prevPage+"</a>":"page"==currentPage?'<a class="page-number prev" href="javascript:void(0)" onclick="getPage('+t+');return false" rel="prev" title="Previous page">'+prevPage+"</a>":'<a class="page-number prev" href="javascript:void(0)" onclick="getLabelPage('+t+');return false" rel="prev" title="Previous page">'+prevPage+"</a>"),pageStart>1&&(a+="page"==currentPage?'<a class="page-number" href='+home_page+' title="Page 1">1</a>':'<a class="page-number" href="/search/label/'+postLabel+"?max-results="+postResults+'" title="Page 1">1</a>'),pageStart>2&&(a+='<span class="page-number dots">'+pageDots+"</span>");for(var s=pageStart;s<=pageEnd;s++)a+=currentPageNo==s?'<span class="page-number current">'+s+"</span>":1==s?"page"==currentPage?'<a class="page-number" href='+home_page+' title="Page 1">1</a>':'<a class="page-number" href="/search/label/'+postLabel+"?max-results="+postResults+'" title="Page 1">1</a>':"page"==currentPage?'<a class="page-number" href="javascript:void(0)" onclick="getPage('+s+');return false" title="Page '+s+'">'+s+"</a>":'<a class="page-number" href="javascript:void(0)" onclick="getLabelPage('+s+');return false" title="Page '+s+'">'+s+"</a>";pageEnd<lastPageNo-1&&(a+='<span class="page-number dots">'+pageDots+"</span>"),pageEnd<lastPageNo&&(a+="page"==currentPage?'<a class="page-number" href="javascript:void(0)" onclick="getPage('+lastPageNo+');return false" title="Page '+lastPageNo+'">'+lastPageNo+"</a>":'<a class="page-number" href="javascript:void(0)" onclick="getLabelPage('+lastPageNo+');return false" title="Page '+lastPageNo+'">'+lastPageNo+"</a>");var r=parseInt(currentPageNo)+1;currentPageNo<lastPageNo&&(a+="page"==currentPage?'<a class="page-number next" href="javascript:void(0)" onclick="getPage('+r+');return false" rel="next" title="Next page">'+nextPage+"</a>":'<a class="page-number next" href="javascript:void(0)" onclick="getLabelPage('+r+');return false" rel="next" title="Next page">'+nextPage+"</a>");var n=document.getElementById("blog-pager");n&&(n.innerHTML=a)}function dataFeed(e){var a=e.feed;startPagination(parseInt(a.openSearch$totalResults.$t,10))}function pageCurrentBlogger(){var e=locationUrl;-1!=e.indexOf("/search/label/")&&(postLabel=-1!=e.indexOf("?updated-max")?e.substring(e.indexOf("/search/label/")+14,e.indexOf("?updated-max")):e.substring(e.indexOf("/search/label/")+14,e.indexOf("?max"))),-1==e.indexOf("?q=")&&-1==e.indexOf(".html")&&(-1==e.indexOf("/search/label/")?(currentPage="page",currentPageNo=-1!=locationUrl.indexOf("#PageNo=")?locationUrl.substring(locationUrl.indexOf("#PageNo=")+8,locationUrl.length):1,document.write("<script src='"+home_page+"feeds/posts/summary?max-results=1&alt=json-in-script&callback=dataFeed'><\/script>")):(currentPage="label",-1==e.indexOf("&max-results=")&&(postResults=pageConf.numposts),currentPageNo=-1!=locationUrl.indexOf("#PageNo=")?locationUrl.substring(locationUrl.indexOf("#PageNo=")+8,locationUrl.length):1,document.write('<script src="'+home_page+"feeds/posts/summary/-/"+postLabel+'?alt=json-in-script&callback=dataFeed&max-results=1" ><\/script>')))}function getPage(e){jsonstart=(e-1)*postResults,noPage=e;var a=document.getElementsByTagName("head")[0],t=document.createElement("script");t.setAttribute("src",home_page+"feeds/posts/summary?start-index="+jsonstart+"&max-results=1&alt=json-in-script&callback=findPostDate"),a.appendChild(t)}function getLabelPage(e){jsonstart=(e-1)*postResults,noPage=e;var a=document.getElementsByTagName("head")[0],t=document.createElement("script");t.setAttribute("src",home_page+"feeds/posts/summary/-/"+postLabel+"?start-index="+jsonstart+"&max-results=1&alt=json-in-script&callback=findPostDate"),a.appendChild(t)}function findPostDate(e){post=e.feed.entry[0];var a=post.published.$t.substring(0,19)+post.published.$t.substring(23,29),t=encodeURIComponent(a);if("page"==currentPage)var s="/search?updated-max="+t+"&max-results="+postResults+"#PageNo="+noPage;else s="/search/label/"+postLabel+"?updated-max="+t+"&max-results="+postResults+"#PageNo="+noPage;location.href=s}pageCurrentBlogger();
